# 随机数据表格生成 API 需求文档

## 1. 背景与目的

为了方便在学习数据库时进行实验与练习，特设计本 API。该 API 用于动态生成包含随机数据的表格，解决数据库学习过程中缺少真实数据材料的问题。用户可灵活指定所需数据量，获得结构化、格式规范的测试数据，便于数据库的增删查改等操作练习。

---

## 2. 接口描述

### 2.1. 接口名称

生成随机数据表格 API

### 2.2. 请求方式

- **方法**：`POST`
- **内容类型**：`application/json`
- **路径**：`/generate-table`
- **基础URL**：`https://simple-api-exercises.up.railway.app`

### 2.3. 请求参数

| 参数名 | 类型  | 是否必填 | 说明                           | 示例值 |
| ------ | ----- | -------- | ------------------------------ | ------ |
| rows   | int   | 是       | 期望返回的数据行数，范围：1-32 | 10     |

### 2.4. 参数约束

- **rows** 参数：
  - 必须为正整数
  - 取值范围：1 ≤ rows ≤ 32
  - 超出范围将返回错误

### 2.5. 请求示例

**标准请求：**
```json
{
  "rows": 10
}
```

**最小请求：**
```json
{
  "rows": 1
}
```

**最大请求：**
```json
{
  "rows": 32
}
```

---

## 3. 返回结果

### 3.1. 成功响应

**HTTP状态码**：`200 OK`

**响应格式**：JSON数组，每个元素代表一行数据

### 3.2. 字段说明

API 固定返回以下三个字段：

| 字段类型 | 生成规则 | 是否必填 | 唯一性 | 示例值 |
| -------- | -------- | -------- | ------ | ------ |
| **id** | 自增整数，从1开始 | 是 | 是 | 1, 2, 3, ... |
| **name** | 随机中文姓名（基于Faker库） | 是 | 否 | "张三", "李四", "王五" |
| **phone** | 随机手机号码（基于Faker库） | 是 | 是 | "13912345678", "18888888888" |

### 3.3. 字段约束

- **必填字段**：`id`、`name`、`phone` 三个字段均为必填，非空
- **唯一性约束**：
  - `id` 字段：保证唯一，自增主键
  - `phone` 字段：保证唯一，不重复
- **格式规范**：所有数据符合常见业务规范
- **中文支持**：姓名字段支持中文

### 3.4. 返回示例

**标准响应：**
```json
[
  {
    "id": 1,
    "name": "张三",
    "phone": "13912345678"
  },
  {
    "id": 2,
    "name": "李四",
    "phone": "18888888888"
  },
  {
    "id": 3,
    "name": "王五",
    "phone": "17777777777"
  }
]
```

**最小响应：**
```json
[
  {
    "id": 1,
    "name": "张三",
    "phone": "13912345678"
  }
]
```

**最大响应（32行数据）：**
```json
[
  {
    "id": 1,
    "name": "张三",
    "phone": "13912345678"
  },
  {
    "id": 2,
    "name": "李四",
    "phone": "18888888888"
  },
  // ... 更多数据行
  {
    "id": 32,
    "name": "赵六",
    "phone": "15555555555"
  }
]
```

### 3.5. 错误响应

**HTTP状态码**：`400 Bad Request`

**错误响应格式（Google API 风格）：**
```json
{
  "error": {
    "code": 400,
    "message": "错误描述",
    "details": "详细错误信息"
  }
}
```

**API 只检查两种错误：**

| 错误类型 | 错误代码 | 错误信息 | 检查条件 |
| -------- | -------- | -------- | -------- |
| **JSON格式错误** | 400 | "请求格式错误，请使用JSON格式" | 请求体不是有效的JSON格式 |
| **数据量错误** | 400 | "数据量错误，rows参数应在1-32之间" | rows不在1-32范围内 |

**错误响应示例：**

**JSON格式错误：**
```json
{
  "error": {
    "code": 400,
    "message": "请求格式错误，请使用JSON格式",
    "details": "请求体必须是有效的JSON格式"
  }
}
```

**数据量错误：**
```json
{
  "error": {
    "code": 400,
    "message": "数据量错误，rows参数应在1-32之间",
    "details": "rows参数必须是1到32之间的整数"
  }
}
```

---

## 4. 使用场景

### 4.1. 数据库学习
- **表结构设计**：快速生成测试数据验证表结构
- **SQL练习**：INSERT、SELECT、UPDATE、DELETE 操作练习
- **索引优化**：大数据量下的查询性能测试
- **事务处理**：批量数据操作的事务管理

### 4.2. 前端开发
- **数据展示**：表格、列表等组件的测试数据
- **分页功能**：分页组件的测试数据
- **搜索功能**：搜索功能的测试数据
- **数据可视化**：图表、统计图的数据源

### 4.3. API测试
- **接口测试**：RESTful API 的测试数据
- **性能测试**：大量数据的接口性能测试
- **压力测试**：高并发场景的测试数据

### 4.4. 教学演示
- **数据科学**：数据分析课程的示例数据
- **机器学习**：算法训练的样本数据
- **业务分析**：业务场景的模拟数据

---

## 5. 技术规范

### 5.1. 请求限制
- **频率限制**：每分钟最多100次请求
- **数据量限制**：单次请求最多32行数据
- **字段固定**：固定返回id、name、phone三个字段

### 5.2. 数据质量
- **真实性**：生成的数据符合真实业务场景
- **一致性**：相同字段的数据格式保持一致
- **完整性**：所有字段都会生成有效值

### 5.3. 安全说明
- **数据安全**：生成的数据为虚拟数据，不涉及真实个人信息
- **访问控制**：无身份验证要求，公开访问
- **使用限制**：仅用于学习和测试目的

---

## 6. 示例代码

### 6.1. JavaScript (Fetch API)
```javascript
const generateTable = async (rows) => {
  try {
    const response = await fetch('https://simple-api-exercises.up.railway.app/generate-table', {
      method: 'POST',
      headers: {
        'Content-Type': 'application/json',
      },
      body: JSON.stringify({
        rows: rows
      })
    });
    
    const data = await response.json();
    return data;
  } catch (error) {
    console.error('请求失败:', error);
  }
};

// 使用示例
generateTable(5).then(data => {
  console.log(data);
});
```

### 6.2. Python (requests)
```python
import requests
import json

def generate_table(rows):
    url = 'https://simple-api-exercises.up.railway.app/generate-table'
    payload = {
        'rows': rows
    }
    
    try:
        response = requests.post(url, json=payload)
        response.raise_for_status()
        return response.json()
    except requests.exceptions.RequestException as e:
        print(f'请求失败: {e}')
        return None

# 使用示例
data = generate_table(5)
if data:
    print(json.dumps(data, indent=2, ensure_ascii=False))
```

### 6.3. curl 命令
```bash
curl -X POST https://simple-api-exercises.up.railway.app/generate-table \
  -H "Content-Type: application/json" \
  -d '{
    "rows": 5
  }'
```

---

## 7. 更新日志

| 版本 | 日期 | 更新内容 |
| ---- | ---- | -------- |
| 1.0.0 | 2024-12 | 初始版本，支持基础数据生成功能 |

---

## 8. 联系方式

如有问题或建议，请通过以下方式联系：
- **项目地址**：GitHub Repository
- **问题反馈**：GitHub Issues
- **技术交流**：开发者社区

---