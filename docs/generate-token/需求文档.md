# Token 生成 API 需求文档

## 1. 概述

设计一个用于生成安全随机 token 的 API。服务端生成一个 32 字节的十六进制 token，用于学习 token 生成机制和安全性实践。

---

## 2. API 信息

* **名称**: `GET /generate-token`
* **功能**: 生成一个安全的随机 token
* **请求格式**: 无需请求体
* **返回格式**: JSON

---

## 3. 请求参数

无需请求参数。

**示例请求**:

```bash
GET /generate-token
```

---

## 4. 返回参数

| 参数    | 类型     | 说明                    |
| ----- | ------ | --------------------- |
| token | string | 使用 secrets.token_hex(32) 生成的 64 位十六进制字符串 |

**示例返回**:

```json
{
  "token": "a1b2c3d4e5f6789012345678901234567890abcdef1234567890abcdef123456"
}
```

---

## 5. 功能需求

1. 服务端使用 `secrets.token_hex(32)` 生成 32 字节的随机 token
2. 返回 JSON 格式的响应，包含生成的 token
3. 每次请求生成不同的 token
4. 用户无需提供任何输入参数

---

## 6. 非功能需求

1. 安全性：
   * 使用 cryptographically secure 的随机数生成器
   * Token 具有足够的熵值（256 位）
2. 简洁性：
   * API 请求和返回结构保持简洁，便于练习和调试
3. 可扩展性：
   * 可后续增加 token 长度配置选项

---

## 7. 技术实现

* 使用 Python 标准库 `secrets` 模块
* `secrets.token_hex(32)` 生成 32 字节的随机数据，转换为 64 位十六进制字符串
* 无需额外依赖库

---

## 8. 技术说明

### 8.1 32 字节的含义
- **字节 (Byte)**: 计算机存储的基本单位，1 字节 = 8 位 (bit)
- **32 字节**: 等于 256 位 (32 × 8 = 256)
- **熵值**: 256 位提供了 2^256 种可能的组合，这是一个天文数字级别的安全性

### 8.2 64 位十六进制字符串
- **十六进制**: 使用 0-9 和 a-f 表示数字，每位可以表示 16 种状态 (0-15)
- **转换关系**: 1 字节 = 8 位 = 2 位十六进制字符 
- **32 字节**: 32 × 2 = 64 位十六进制字符
- **示例**: 
  - 1 字节数据 `0xAB` → 十六进制字符串 `"ab"`
  - 32 字节数据 → 64 位十六进制字符串
- 16^64 == 2^256

### 8.3 安全性分析
- **随机性**: `secrets` 模块使用操作系统提供的加密安全随机数生成器
- **不可预测性**: 每次生成的 token 都是完全随机的，无法被预测
- **碰撞概率**: 2^256 种可能，碰撞概率极低，可以忽略不计
